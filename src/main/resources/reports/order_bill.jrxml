<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
              name="OrderBill" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="a1b2c3d4-e5f6-a7b8-c9d0-e1f2a3b4c5d6">

    <subDataset name="itemDataset" uuid="1a2b3c4d-5e6f-7a8b-9c0d-1e2f3a4b5c6d">
        <field name="item.name" class="java.lang.String"/>
        <field name="quantity" class="java.lang.Integer"/>
        <field name="price" class="java.lang.Double"/>
    </subDataset>

    <parameter name="shopName" class="java.lang.String"/>
    <parameter name="shopAddress" class="java.lang.String"/>
    <parameter name="shopPhone" class="java.lang.String"/>
    <parameter name="customerName" class="java.lang.String"/>
    <parameter name="orderId" class="java.lang.Long"/>
    <parameter name="orderDate" class="java.lang.String"/>
    <parameter name="totalAmount" class="java.lang.Double"/>
    <parameter name="orderDetailsDataSource" class="net.sf.jasperreports.engine.data.JRBeanCollectionDataSource"/>

    <title>
        <band height="100">
            <textField>
                <reportElement x="0" y="0" width="555" height="30" uuid="a1b2c3d4-e5f6-a7b8-c9d0-e1f2a3b4c5d6"/>
                <textElement textAlignment="Center">
                    <font size="22" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{shopName}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="0" y="30" width="555" height="20" uuid="b1c2d3e4-f5a6-b7c8-d9e0-f1a2b3c4d5e6"/>
                <textElement textAlignment="Center"/>
                <textFieldExpression><![CDATA[$P{shopAddress}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="0" y="50" width="555" height="20" uuid="c1d2e3f4-a5b6-c7d8-e9f0-a1b2c3d4e5f6"/>
                <textElement textAlignment="Center"/>
                <textFieldExpression><![CDATA[$P{shopPhone}]]></textFieldExpression>
            </textField>
        </band>
    </title>

    <pageHeader>
        <band height="60">
            <staticText>
                <reportElement x="0" y="0" width="100" height="20" uuid="e1f2a3b4-c5d6-e7f8-a9b0-c1d2e3f4a5b6"/>
                <text><![CDATA[Customer Name:]]></text>
            </staticText>
            <textField>
                <reportElement x="100" y="0" width="200" height="20" uuid="f1a2b3c4-d5e6-f7a8-b9c0-d1e2f3a4b5c6"/>
                <textFieldExpression><![CDATA[$P{customerName}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="0" y="20" width="100" height="20" uuid="a2b3c4d5-e6f7-a8b9-c0d1-e2f3a4b5c6d7"/>
                <text><![CDATA[Order ID:]]></text>
            </staticText>
            <textField>
                <reportElement x="100" y="20" width="200" height="20" uuid="b2c3d4e5-f6a7-b8c9-d0e1-f2a3b4c5d6e7"/>
                <textFieldExpression><![CDATA[$P{orderId}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="0" y="40" width="100" height="20" uuid="c2d3e4f5-a6b7-c8d9-e0f1-a2b3c4d5e6f7"/>
                <text><![CDATA[Order Date:]]></text>
            </staticText>
            <textField>
                <reportElement x="100" y="40" width="200" height="20" uuid="d2e3f4a5-b6c7-d8e9-f0a1-b2c3d4e5f6a7"/>
                <textFieldExpression><![CDATA[$P{orderDate}]]></textFieldExpression>
            </textField>
        </band>
    </pageHeader>

    <columnHeader>
        <band height="30">
            <staticText>
                <reportElement x="0" y="0" width="255" height="30" uuid="e2f3a4b5-c6d7-e8f9-a0b1-c2d3e4f5a6b7"/>
                <textElement>
                    <font size="14" isBold="true"/>
                </textElement>
                <text><![CDATA[Item Name]]></text>
            </staticText>
            <staticText>
                <reportElement x="255" y="0" width="100" height="30" uuid="f2a3b4c5-d6e7-f8a9-b0c1-d2e3f4a5b6c7"/>
                <textElement>
                    <font size="14" isBold="true"/>
                </textElement>
                <text><![CDATA[Quantity]]></text>
            </staticText>
            <staticText>
                <reportElement x="355" y="0" width="100" height="30" uuid="a3b4c5d6-e7f8-a9b0-c1d2-e3f4a5b6c7d8"/>
                <textElement>
                    <font size="14" isBold="true"/>
                </textElement>
                <text><![CDATA[Price]]></text>
            </staticText>
            <staticText>
                <reportElement x="455" y="0" width="100" height="30" uuid="b3c4d5e6-f7a8-b9c0-d1e2-f3a4b5c6d7e8"/>
                <textElement>
                    <font size="14" isBold="true"/>
                </textElement>
                <text><![CDATA[Subtotal]]></text>
            </staticText>
        </band>
    </columnHeader>

    <detail>
        <band height="50">
            <componentElement>
                <reportElement x="0" y="0" width="555" height="50" uuid="11111111-2222-3333-4444-555555555555"/>
                <jr:list xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd" printOrder="Vertical">
                    <datasetRun subDataset="itemDataset" uuid="22222222-3333-4444-5555-666666666666">
                        <dataSourceExpression><![CDATA[$P{orderDetailsDataSource}]]></dataSourceExpression>
                    </datasetRun>
                    <jr:listContents height="20" width="555">
                        <textField>
                            <reportElement x="0" y="0" width="255" height="20" uuid="c3d4e5f6-a7b8-c9d0-e1f2-a3b4c5d6e7f8"/>
                            <textFieldExpression><![CDATA[$F{item.name}]]></textFieldExpression>
                        </textField>
                        <textField>
                            <reportElement x="255" y="0" width="100" height="20" uuid="d3e4f5a6-b7c8-d9e0-f1a2-b3c4d5e6f7a8"/>
                            <textFieldExpression><![CDATA[$F{quantity}]]></textFieldExpression>
                        </textField>
                        <textField>
                            <reportElement x="355" y="0" width="100" height="20" uuid="e3f4a5b6-c7d8-e9f0-a1b2-c3d4e5f6a7b8"/>
                            <textFieldExpression><![CDATA[$F{price}]]></textFieldExpression>
                        </textField>
                        <textField>
                            <reportElement x="455" y="0" width="100" height="20" uuid="f3a4b5c6-d7e8-f9a0-b1c2-d3e4f5a6b7c8"/>
                            <textFieldExpression><![CDATA[new Double($F{quantity} * $F{price})]]></textFieldExpression>
                        </textField>
                    </jr:listContents>
                </jr:list>
            </componentElement>
        </band>
    </detail>

    <summary>
        <band height="50">
            <staticText>
                <reportElement x="355" y="10" width="100" height="30" uuid="a4b5c6d7-e8f9-a0b1-c2d3-e4f5a6b7c8d9"/>
                <textElement textAlignment="Right">
                    <font size="14" isBold="true"/>
                </textElement>
                <text><![CDATA[Total:]]></text>
            </staticText>
            <textField>
                <reportElement x="455" y="10" width="100" height="30" uuid="b4c5d6e7-f8a9-b0c1-d2e3-f4a5b6c7d8e9"/>
                <textElement>
                    <font size="14" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{totalAmount}]]></textFieldExpression>
            </textField>
        </band>
    </summary>
</jasperReport>
